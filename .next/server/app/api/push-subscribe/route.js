"use strict";(()=>{var e={};e.id=878,e.ids=[878],e.modules={3524:e=>{e.exports=require("@prisma/client")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5452:(e,r,s)=>{s.r(r),s.d(r,{headerHooks:()=>b,originalPathname:()=>v,patchFetch:()=>P,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>m});var t={};s.r(t),s.d(t,{POST:()=>p});var a=s(5419),i=s(9108),n=s(9678),o=s(8070),u=s(3214);async function p(e){try{let{subscription:r,phone:s}=await e.json();if(!r||!r.endpoint)return o.Z.json({error:"Invalid subscription"},{status:400});let t=await u._.pushSubscription.upsert({where:{endpoint:r.endpoint},update:{p256dh:r.keys.p256dh,auth:r.keys.auth,phone:s||null},create:{endpoint:r.endpoint,p256dh:r.keys.p256dh,auth:r.keys.auth,phone:s||null}});return o.Z.json({success:!0,message:"Push subscription saved",subscriptionId:t.id})}catch(e){return console.error("Push subscription error:",e),o.Z.json({error:"Failed to save subscription",details:e.message},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/push-subscribe/route",pathname:"/api/push-subscribe",filename:"route",bundlePath:"app/api/push-subscribe/route"},resolvedPagePath:"/workspaces/APP-Final/app/api/push-subscribe/route.ts",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:c,staticGenerationAsyncStorage:h,serverHooks:l,headerHooks:b,staticGenerationBailout:m}=d,v="/api/push-subscribe/route";function P(){return(0,n.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:h})}},3214:(e,r,s)=>{s.d(r,{_:()=>a});var t=s(3524);let a=globalThis.prisma||new t.PrismaClient({log:["query","error","warn"]})}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[638,206],()=>s(5452));module.exports=t})();