"use strict";(()=>{var r={};r.id=684,r.ids=[684],r.modules={3524:r=>{r.exports=require("@prisma/client")},517:r=>{r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7077:(r,e,t)=>{t.r(e),t.d(e,{headerHooks:()=>f,originalPathname:()=>w,patchFetch:()=>v,requestAsyncStorage:()=>y,routeModule:()=>h,serverHooks:()=>P,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>j});var a={};t.r(a),t.d(a,{DELETE:()=>m,GET:()=>d,POST:()=>p,PUT:()=>l,dynamic:()=>c});var o=t(5419),n=t(9108),i=t(9678),s=t(8070),u=t(3214);let c="force-dynamic";async function d(){try{let r=await u._.product.findMany({orderBy:{createdAt:"desc"},where:{inStock:!0}});return s.Z.json(r)}catch(r){return s.Z.json({error:"Internal Server Error"},{status:500})}}async function p(r){try{let{name:e,description:t,price:a,image:o,category:n}=await r.json();if(!e||!a)return s.Z.json({error:"Name and Price are required"},{status:400});let i=await u._.product.create({data:{name:e,description:t||"",price:Number(a),image:o||"https://placehold.co/600x600/png?text=Product",inStock:!0,category:n||"device"}});return s.Z.json(i)}catch(r){return console.error("Create Product Error:",r),s.Z.json({error:"Failed to create product"},{status:500})}}async function l(r){try{let{id:e,...t}=await r.json();if(!e)return s.Z.json({error:"Product ID required"},{status:400});let a=await u._.product.update({where:{id:String(e)},data:{name:t.name,description:t.description,price:Number(t.price),image:t.image,category:t.category}});return s.Z.json(a)}catch(r){return console.error("Update Product Error:",r),s.Z.json({error:"Update failed"},{status:500})}}async function m(r){try{let{searchParams:e}=new URL(r.url),t=e.get("id");if(!t)return s.Z.json({error:"ID required"},{status:400});return await u._.product.delete({where:{id:t}}),s.Z.json({success:!0})}catch(r){return console.error("Delete Product Error:",r),s.Z.json({error:"Delete failed"},{status:500})}}let h=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"/workspaces/APP-Final/app/api/products/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:g,serverHooks:P,headerHooks:f,staticGenerationBailout:j}=h,w="/api/products/route";function v(){return(0,i.patchFetch)({serverHooks:P,staticGenerationAsyncStorage:g})}},3214:(r,e,t)=>{t.d(e,{_:()=>o});var a=t(3524);let o=globalThis.prisma||new a.PrismaClient({log:["query","error","warn"]})}};var e=require("../../../webpack-runtime.js");e.C(r);var t=r=>e(e.s=r),a=e.X(0,[638,206],()=>t(7077));module.exports=a})();