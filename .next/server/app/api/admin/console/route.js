(()=>{var e={};e.id=3533,e.ids=[3533],e.modules={517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},7529:()=>{},8754:(e,t,r)=>{"use strict";r.r(t),r.d(t,{headerHooks:()=>d,originalPathname:()=>S,patchFetch:()=>O,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>A});var s={};r.r(s),r.d(s,{POST:()=>c});var o=r(5419),a=r(9108),i=r(9678),n=r(8070),l=r(313);async function c(e){try{let{endpoint:t,payload:r,password:s}=await e.json();if(s!==process.env.ADMIN_PASSWORD)return n.Z.json({error:"Unauthorized"},{status:401});let o=`CONSOLE-${Date.now()}`,a=await (0,l.Ft)(t,r,o);return n.Z.json(a.data,{status:a.status})}catch(e){return n.Z.json({error:e.message},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/admin/console/route",pathname:"/api/admin/console",filename:"route",bundlePath:"app/api/admin/console/route"},resolvedPagePath:"/workspaces/APP-Final/app/api/admin/console/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:d,staticGenerationBailout:A}=u,S="/api/admin/console/route";function O(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},313:(e,t,r)=>{"use strict";let s;r.d(t,{Vi:()=>d,Ft:()=>g});var o=r(8428),a=r(6489);let i={maxRetries:3,initialDelayMs:1e3,maxDelayMs:3e4,backoffMultiplier:2,shouldRetry:e=>!!(!e||"ECONNREFUSED"===e.code||"ETIMEDOUT"===e.code||e.response?.status>=500)};async function n(e,t={}){let r;let s={...i,...t},o=s.initialDelayMs;for(let t=0;t<=s.maxRetries;t++)try{return await e()}catch(e){if(r=e,t===s.maxRetries)break;if(!s.shouldRetry(e))throw e;await function(e){return new Promise(t=>setTimeout(t,e))}(o),o=Math.min(o*s.backoffMultiplier,s.maxDelayMs)}throw r}var l=r(8216);let c=process.env.AMIGO_BASE_URL||"https://amigo.ng/api/data/",u=process.env.AWS_PROXY_URL,p=process.env.AMIGO_API_KEY||"";if(u)try{s=new a.HttpsProxyAgent(u)}catch(e){console.error("Failed to initialize Proxy Agent",e)}let m=o.Z.create({httpsAgent:s,proxy:!1,headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`,Token:p,"X-API-Key":p,Accept:"application/json"},timeout:6e4});async function g(e,t,r){l.k.logExternalApiCall("AMIGO",c,"POST",0,0,{hasIdempotencyKey:!!r});try{let e=await n(async()=>{let e={};r&&(e["Idempotency-Key"]=r);let s=Date.now(),o=await m.post(c,t,{headers:e}),a=Date.now()-s;return l.k.logExternalApiCall("AMIGO",c,"POST",o.status,a),{success:!0,data:o.data,status:o.status}},{maxRetries:3,initialDelayMs:1e3,maxDelayMs:1e4,shouldRetry:e=>!!("ECONNREFUSED"===e.code||"ETIMEDOUT"===e.code||e.response?.status>=500)});return console.log(`[Amigo API] ✅ Success: ${e.status}`),e}catch(r){let e=r.response?.data?.message||r.message,t=r.response?.status||500;return l.k.logExternalApiCall("AMIGO",c,"POST",t,0,{error:e,retried:!0}),console.error(`[Amigo API] ❌ Failed: ${e}`),{success:!1,data:r.response?.data||{error:e},status:t}}}let d={MTN:1,GLO:2,AIRTEL:4,"9MOBILE":9}},8216:(e,t,r)=>{"use strict";var s;r.d(t,{k:()=>a}),function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.CRITICAL="CRITICAL"}(s||(s={}));class o{formatLog(e){return JSON.stringify({...e,timestamp:new Date().toISOString()})}logApiRequest(e,t,r,s){let o=Date.now(),a=Math.random().toString(36).substr(2,9);return console.log(this.formatLog({timestamp:new Date().toISOString(),level:"INFO",service:e,action:t,userId:r,details:{...s,requestId:a,type:"REQUEST_START"}})),(s,i,n)=>{let l=Date.now()-o;console.log(this.formatLog({timestamp:new Date().toISOString(),level:s>=400?"ERROR":"INFO",service:e,action:t,userId:r,statusCode:s,duration:l,details:{...i,requestId:a,type:"REQUEST_END"},error:n?.message}))}}logTransaction(e,t,r,s,o){console.log(this.formatLog({timestamp:new Date().toISOString(),level:"SUCCESS"===s?"INFO":"WARN",service:"TRANSACTION",action:t,userId:e,details:{amount:r,status:s,...o}}))}logAuth(e,t,r,s){console.log(this.formatLog({timestamp:new Date().toISOString(),level:r?"INFO":"WARN",service:"AUTH",action:e,userId:t,details:{success:r,...s}}))}logSecurityEvent(e,t){console.log(this.formatLog({timestamp:new Date().toISOString(),level:"WARN",service:"SECURITY",action:e,details:t}))}logError(e,t,r,s){console.error(this.formatLog({timestamp:new Date().toISOString(),level:"ERROR",service:e,action:t,error:r.message,details:s}))}logCritical(e,t,r){console.error(this.formatLog({timestamp:new Date().toISOString(),level:"CRITICAL",service:"SYSTEM",action:e,error:t.message,details:r}))}logWebhook(e,t,r,s){console.log(this.formatLog({timestamp:new Date().toISOString(),level:"INFO",service:"WEBHOOK",action:e,details:{transactionId:t,status:r,...s}}))}logExternalApiCall(e,t,r,s,o,a){console.log(this.formatLog({timestamp:new Date().toISOString(),level:s>=400?"WARN":"DEBUG",service:`EXTERNAL_API_${e}`,action:`${r} ${t}`,statusCode:s,duration:o,details:a}))}logDatabaseOperation(e,t,r,s,o){console.log(this.formatLog({timestamp:new Date().toISOString(),level:s?"DEBUG":"ERROR",service:"DATABASE",action:`${e}_${t}`,duration:r,details:{success:s,...o}}))}}let a=new o}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,6206,7901,8428,6489],()=>r(8754));module.exports=s})();