"use strict";(()=>{var e={};e.id=744,e.ids=[744],e.modules={3524:e=>{e.exports=require("@prisma/client")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1301:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>h,originalPathname:()=>P,patchFetch:()=>v,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>m});var r={};a.r(r),a.d(r,{POST:()=>p});var n=a(5419),i=a(9108),o=a(9678),s=a(8070),u=a(3214);async function p(e){try{let{agentId:t,oldPin:a,newPin:r}=await e.json(),n=await u._.agent.findUnique({where:{id:t}});if(!n||n.pin!==a)return s.Z.json({error:"Invalid old PIN"},{status:401});return await u._.agent.update({where:{id:t},data:{pin:r}}),s.Z.json({success:!0})}catch(e){return s.Z.json({error:"Failed"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/agent/update-pin/route",pathname:"/api/agent/update-pin",filename:"route",bundlePath:"app/api/agent/update-pin/route"},resolvedPagePath:"/workspaces/APP-Final/app/api/agent/update-pin/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:g,headerHooks:h,staticGenerationBailout:m}=d,P="/api/agent/update-pin/route";function v(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:c})}},3214:(e,t,a)=>{a.d(t,{_:()=>n});var r=a(3524);let n=globalThis.prisma||new r.PrismaClient({log:["query","error","warn"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[638,206],()=>a(1301));module.exports=r})();